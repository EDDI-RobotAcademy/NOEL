<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="order">
    <!-- 주문 및 결제 -->
    <insert id="nextOrder" parameterType="OrderVO">
        insert into noel_order values(
                                         order_seq.nextval,
                                         #{userId},
                                         to_char(sysdate,'yyyy-mm-dd'),
                                         #{orderQuan},
                                         '배송준비중',
                                         #{shippingName},
                                         #{shippingAddr},
                                         #{shippingPhone},
                                         #{impUid},
                                         #{prdNo},
                                         #{orderPrice}
                                     )
    </insert>
    <!-- 결제 성공 시 장바구니에서 삭제 -->
    <delete id="deleteCartAll" parameterType="String">
        delete from noel_cart where user_id=#{userId}
    </delete>
</mapper>